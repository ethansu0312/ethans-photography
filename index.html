<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ethan's Photography</title>
<style>
  /* Your existing styles, slightly consolidated where needed */
  @font-face {
    font-family: 'BebasNeue';
    src: url('BebasNeue-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: 'BebasNeue', sans-serif;
  }

  .hero {
    position: relative;
    width: 100vw;
    height: 100vh;
    background: url('my-hero.jpg') center/cover no-repeat;
    overflow: hidden;
  }

  .hero::before {
    content: "";
    position: absolute;
    top: 0; left: 0;
    width: 60px; height: 100%;
    pointer-events: none;
    background: linear-gradient(to right, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 20%, transparent 100%);
    z-index: 5;
    animation: pulseGlow 3s infinite ease-in-out;
  }

  @keyframes pulseGlow { 0%,100%{opacity:.05}50%{opacity:.4} }
  .hero.pause-glow::before { animation-play-state: paused !important; }

  .hero::after{
    content:"";
    position:absolute; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.25); pointer-events:none;
  }

  /* Desktop vertical menu (default) */
  .vertical-menu {
    position: fixed;
    left: -160px;
    top: calc(50% - 130px);
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    z-index: 100;
    transition: left 0.35s ease;
  }

  .hover-zone {
    position: fixed; left: 0; top: 0; width: 120px; height: 100vh; z-index: 50;
  }

  .menu-item, .menu-item:link, .menu-item:visited {
    text-decoration: none !important;
    color: #fff !important;
    padding: 20px 0;
    font-size: 2.5rem;
    transition: transform .2s, color .2s, text-shadow .2s;
    position: relative;
  }

  .menu-item:hover {
    transform: translateX(10px);
    text-shadow: 0 8px 16px rgba(0, 0, 0, 1);
  }

  .submenu {
    position: absolute;
    top: 100%;
    left: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-height: 0;
    overflow: hidden;
    transition: max-height .4s ease;
  }

  .submenu a { 
    min-width: 160px; 
    font-size: 1.8rem; 
    color:#fff; 
    text-decoration:none!important;
    transition: transform .2s, text-shadow .2s;
    display: inline-block;
  }

  .submenu a:hover {
    transform: translateX(10px);
    text-shadow: 0 8px 16px rgba(0, 0, 0, 1);
  }

  .lower-menu { display:flex; flex-direction:column; transition: transform .5s ease; }

  /* MOBILE & TABLET STYLES - Updated to include iPads */
  @media screen and (max-width: 1366px) {
    .hero::before { display: none !important; }

    /* Mobile menu button */
    #menuBtn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #fff;
      z-index: 1001;
      display: flex; /* JS will show it on touch/mobile */
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 2rem;
      color: #000;
    }

    .vertical-menu {
      left: -200px; /* hidden for mobile */
      top: 50%;
      transform: translateY(-50%);
      z-index: 1000;
      transition: left 0.35s ease;
      background: transparent;
    }

    .vertical-menu.show { left: 20px; }

    .vertical-menu .menu-item { font-size: 2rem; padding: 10px 0; color: #fff; }
    .vertical-menu .submenu a { font-size: 1.5rem; padding: 8px 0; }

    /* adjust vertical position on small screens */
    .vertical-menu { top: calc(50% - 160px); }

    #lowerMenu { transition: transform .5s ease; }
  }

  /* iPad-specific styles (larger text for tablets) */
  @media screen and (min-width: 768px) and (max-width: 1366px) {
    .vertical-menu .menu-item { font-size: 2.5rem; }
    .vertical-menu .submenu a { font-size: 2rem; }
  }
</style>
</head>
<body>

<div class="hero">
  <div class="hover-zone"></div>

  <!-- Mobile menu button (shown by JS only on touch devices) -->
  <div id="menuBtn" aria-label="menu" role="button">&#9776;</div>

  <div class="vertical-menu" aria-hidden="true">
    <a href="origin/index.html" class="menu-item" id="origin">Origin</a>

    <div class="menu-item collections-wrapper">
      <a href="#" id="collectionsBtn" class="menu-item">Collections</a>
      <div class="submenu" id="submenu">
        <a href="architecture/index.html">Architecture</a>
        <a href="cars/index.html">Cars</a>
        <a href="people/index.html">People</a>
        <a href="travels/index.html">Travels</a>
      </div>
    </div>

    <div class="lower-menu" id="lowerMenu">
      <a href="archive/index.html" class="menu-item">Archive</a>
      <a href="connect/index.html" class="menu-item">Connect</a>
    </div>
  </div>
</div>

<!-- ===== JS: clean, single source of truth for desktop/mobile ===== -->
<script>
(function() {
  // element refs
  const verticalMenu = document.querySelector('.vertical-menu');
  const hoverZone = document.querySelector('.hover-zone');
  const hero = document.querySelector('.hero');
  const collectionsWrapper = document.querySelector('.collections-wrapper');
  const submenu = document.getElementById('submenu');
  const lowerMenu = document.getElementById('lowerMenu');

  const menuBtn = document.getElementById('menuBtn');
  const collectionsBtn = document.getElementById('collectionsBtn');

  // sanity
  if (!verticalMenu || !menuBtn || !collectionsBtn || !submenu || !lowerMenu || !hoverZone || !collectionsWrapper) {
    console.error('MENU INIT: missing element(s)', {
      verticalMenu: !!verticalMenu, menuBtn: !!menuBtn, collectionsBtn: !!collectionsBtn,
      submenu: !!submenu, lowerMenu: !!lowerMenu, hoverZone: !!hoverZone, collectionsWrapper: !!collectionsWrapper
    });
    return;
  }

  // handlers references so we can add/remove cleanly
  function desktopHoverOpen() {
    verticalMenu.style.left = '30px';
    hero.classList.add('pause-glow');
  }
  function desktopHoverClose() {
    verticalMenu.style.left = '-160px';
    hero.classList.remove('pause-glow');
    // also collapse submenu when leaving
    submenu.style.maxHeight = '0px';
    lowerMenu.style.transform = 'translateY(0px)';
  }
  function desktopCollectionsEnter() {
    submenu.style.maxHeight = submenu.scrollHeight + 'px';
    lowerMenu.style.transform = `translateY(${submenu.scrollHeight}px)`;
  }
  function desktopCollectionsLeave() {
    submenu.style.maxHeight = '0px';
    lowerMenu.style.transform = 'translateY(0px)';
  }

  // utility - Updated to include iPads
  function isTouchMobile() {
    return ('ontouchstart' in window || navigator.maxTouchPoints > 0) && window.innerWidth <= 1366;
  }

  // Setup mobile listeners once (they check isTouchMobile inside)
  function setupMobileListeners() {
    // main menu button: toggles class .show
    // single handler, always present, but will no-op on desktop
    if (!menuBtn._mobileListenerAttached) {
      menuBtn.addEventListener('click', function (e) {
        if (!isTouchMobile()) return;
        verticalMenu.classList.toggle('show');
        // if menu closed, collapse submenu
        if (!verticalMenu.classList.contains('show')) {
          submenu.style.maxHeight = '0px';
          lowerMenu.style.transform = 'translateY(0px)';
        }
      });
      menuBtn._mobileListenerAttached = true;
    }

    // collections button toggles submenu on mobile (and prevents default)
    if (!collectionsBtn._mobileListenerAttached) {
      collectionsBtn.addEventListener('click', function (e) {
        if (!isTouchMobile()) return; // desktop will use hover
        e.preventDefault();
        const isOpen = submenu.style.maxHeight && submenu.style.maxHeight !== '0px';
        if (isOpen) {
          submenu.style.maxHeight = '0px';
          lowerMenu.style.transform = 'translateY(0px)';
        } else {
          submenu.style.maxHeight = submenu.scrollHeight + 'px';
          lowerMenu.style.transform = `translateY(${submenu.scrollHeight}px)`;
        }
      });
      collectionsBtn._mobileListenerAttached = true;
    }
  }

  // Enable desktop hover behavior: add event listeners
  let desktopEnabled = false;
  function enableDesktopHover() {
    if (desktopEnabled) return;
    hoverZone.addEventListener('mouseenter', desktopHoverOpen);
    hoverZone.addEventListener('mouseleave', desktopHoverClose);
    verticalMenu.addEventListener('mouseenter', desktopHoverOpen);
    verticalMenu.addEventListener('mouseleave', desktopHoverClose);

    collectionsWrapper.addEventListener('mouseenter', desktopCollectionsEnter);
    collectionsWrapper.addEventListener('mouseleave', desktopCollectionsLeave);
    desktopEnabled = true;
    console.log('MENU: desktop hover enabled');
  }

  // Disable desktop hover behavior: remove event listeners
  function disableDesktopHover() {
    if (!desktopEnabled) return;
    hoverZone.removeEventListener('mouseenter', desktopHoverOpen);
    hoverZone.removeEventListener('mouseleave', desktopHoverClose);
    verticalMenu.removeEventListener('mouseenter', desktopHoverOpen);
    verticalMenu.removeEventListener('mouseleave', desktopHoverClose);

    collectionsWrapper.removeEventListener('mouseenter', desktopCollectionsEnter);
    collectionsWrapper.removeEventListener('mouseleave', desktopCollectionsLeave);
    desktopEnabled = false;
    console.log('MENU: desktop hover disabled');
  }

  // initialize UI state depending on device
  function updateMode() {
    const mobile = isTouchMobile();
    // show or hide mobile button
    menuBtn.style.display = mobile ? 'flex' : 'none';

    if (mobile) {
      // disable hover behaviours that fight the mobile toggle
      disableDesktopHover();
      // ensure menu closed initially
      verticalMenu.classList.remove('show');
      submenu.style.maxHeight = '0px';
      lowerMenu.style.transform = 'translateY(0px)';
    } else {
      // enable desktop hover logic
      enableDesktopHover();
      // ensure menu uses desktop left values (and hidden)
      verticalMenu.style.left = '-160px';
      verticalMenu.classList.remove('show');
      submenu.style.maxHeight = '0px';
      lowerMenu.style.transform = 'translateY(0px)';
    }
  }

  // run once and on resize
  setupMobileListeners(); // attach persistent mobile listeners (no clones)
  window.addEventListener('load', updateMode);
  window.addEventListener('resize', updateMode);

  // For debugging: log clicks and states (remove logs later if you want)
  menuBtn.addEventListener('click', () => {
    console.log('MENU: menuBtn clicked; show class present:', verticalMenu.classList.contains('show'), 'isTouchMobile:', isTouchMobile(), 'innerWidth:', window.innerWidth);
  });
  collectionsBtn.addEventListener('click', () => {
    console.log('MENU: collectionsBtn clicked; submenu height:', submenu.style.maxHeight);
  });

})();
</script>
</body>
</html>